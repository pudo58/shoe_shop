CREATE TABLE ADMINS
(
    ADMIN_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    USERNAME VARCHAR(256) NOT NULL UNIQUE,
    PASSWORD VARCHAR(256) NOT NULL,
    NAME TEXT ,
    AVARTA VARCHAR(500) ,
    PHONE_NUMBER VARCHAR(15),
    EMAIL VARCHAR(255)NOT NULL
);
CREATE TABLE STAFFS
(
    STAFF_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ADMIN_ID INT ,
    USERNAME VARCHAR(255) NOT NULL UNIQUE,
    PASSWORD VARCHAR(255) NOT NULL,
    NAME TEXT,
    EMAIL VARCHAR(255) NOT NULL UNIQUE,
    PHONE_NUMBER VARCHAR(15),
    ADDRESS TEXT,
    AVARTA VARCHAR(500),
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT,
    FOREIGN KEY (ADMIN_ID) REFERENCES ADMINS(ADMIN_ID)
);
CREATE TABLE USERS
(
    USER_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY
    USERNAME VARCHAR(255) NOT NULL UNIQUE,
    PASSWORD VARCHAR(255) NOT NULL,
    NAME TEXT,
    EMAIL VARCHAR(255) NOT NULL UNIQUE,
    PHONE_NUMBER VARCHAR(15),
    ADDRESS TEXT,
    AVARTA VARCHAR(500),
    MONEY REAL DEFAULT 0,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT,
    STATUS INT DEFAULT 0
);
CREATE TABLE USER_DETAIL
(
    USER_DETAIL_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    USER_ID INT NOT NULL,
    LOGIN_FAIL_COUNT INT DEFAULT 0,
    LOGIN_LATER TIMESTAMP,
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID)
)
CREATE TABLE CATEGORIES
(
    CATEGORY_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    STAFF_ID INT NOT NULL,
    PARENT_ID INT , /* CHỖ NÀY LÀ ID CỦA CATEGORY CHA, TỨC LÀ BẢNG NÀY SẼ QUAN HỆ VỚI CHÍNH NÓ , VÌ 1
    CATEGORY MẸ CÓ THỂ CÓ NHIỀU CATEGORY CON,VÍ DỤ TRONG GIẦY CÒN CÓ GIẦY THỂ THAO,... */
    NAME TEXT NOT NULL,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    LIKE INT DEFAULT 0, /* LƯỢT YÊU THÍCH CỦA DANH MỤC */
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT,
    FOREIGN KEY (STAFF_ID) REFERENCES STAFFS(STAFF_ID),
    FOREIGN KEY(PARENT_ID) REFERENCES CATEGORIES(CATEGORY_ID)
);
CREATE TABLE SIZES
(
    SIZE_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    SIZE_NAME TEXT NOT NULL,
    SIZE INT NOT NULL,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT
);
CREATE TABLE COLORS
(
    COLOR_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    NAME TEXT,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT
);
CREATE TABLE PRODUCTS
(
    PRODUCT_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    CATEGORY_ID INT NOT NULL,
    SIZE_ID INT,
    NAME TEXT NOT NULL,
    DESCRIPTION TEXT,
    PRICE REAL NOT NULL,
    QUANTITY INT ,
    IMAGE VARCHAR(500),/* ẢNH SẢN PHẨM */
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT,
    STATUS INT DEFAULT 0,
    FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID),
    FOREIGN KEY(SIZE_ID) REFERENCES SIZE(SIZE_ID),
    FOREIGN KEY(COLOR_ID) REFERENCES COLORS(COLOR_ID)
);
CREATE TABLE DISCOUNTS
(
    DISCOUNT_ID INT AUTO_INCREMENT  NOT NULL PRIMARY KEY,
    NAME TEXT NOT NULL, /* PHÂN RA LÀM 2 LOẠI LÀ GIẢM GIÁ THEO % VÀ THEO 1 MỨC GIÁ NHẤT ĐỊNH */
    DISCOUNT REAL NOT NULL,
    STATUS INT DEFAULT 0,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT
);
CREATE TABLE VOUCHERS
(
    VOUCHER_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    NAME TEXT NOT NULL,
    CATEGORY_ID INT NOT NULL,
    DISCOUNT_ID INT NOT NULL,
    DESCRIPTION TEXT,
    QUANTITY INT NOT NULL,
    EFFECT_FROM TIMESTAMP,
    EFFECT_UNTIL TIMESTAMP,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT,
    FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES(CATEGORY_ID),
    FOREIGN KEY (DISCOUNT_ID) REFERENCES DISCOUNTS(DISCOUNT_ID)
);
CREATE TABLE ORDERS
(
    ORDER_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    VOUCHER_ID INT,
    CODE VARCHAR(255) NOT NULL UNIQUE,
    PRODUCT_ID INT NOT NULL,
    CATEGORY_ID INT NOT NULL,
    USER_ID INT NOT NULL,
    QUANTITY INT,
    PRICE REAL,
    EFFECT_FROM TIMESTAMP,
    EFFECT_UNTIL TIMESTAMP,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT,
    STATUS INT DEFAULT 1,
    FOREIGN KEY(VOUCHER_ID) REFERENCES VOUCHERS(VOUCHER_ID),
    FOREIGN KEY(USER_ID) REFERENCES USERS(USER_ID),
    FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID),
    FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORIES(CATEGORY_ID)
);
CREATE TABLE BILLS
(
    BILL_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    USER_ID INT NOT NULL,
    PRODUCT_ID INT NOT NULL,
    CATEGORY_ID INT NOT NULL,
    VOUCHER_ID INT ,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT
    FOREIGN KEY(USER_ID) REFERENCES USERS(USER_ID),
    FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID),
    FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORIES(CATEGORY_ID),
    FOREIGN KEY(VOUCHER_ID) REFERENCES VOUCHERS(VOUCHER_ID)
);
CREATE TABLE PAYMENT_METHOD
(
    PAYMENT_METHOD_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    NAME TEXT NOT NULL,
    CODE VARCHAR(255) UNIQUE,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT
);
CREATE TABLE PAYMENTS
(
    PAYMENT_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ORDER_ID INT,
    PAYMENT_METHOD_ID INT NOT NULL,
    PAY_NOTE TEXT,
    CREATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    CREATOR TEXT,
    MODIFIED TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    MODIFIER TEXT
    FOREIGN KEY(PAYMENT_METHOD_ID) REFERENCES PAYMENT_METHOD(PAYMENT_METHOD_ID),
    FOREIGN KEY(ORDER_ID) REFERENCES ORDERS(ORDER_ID)
);

CREATE TABLE REPORT_QUANTITY_DAILY
(
    USER_ID INT NOT NULL PRIMARY KEY,
    CATEGORY_ID INT NOT NULL,
    PRODUCT_ID INT not null,
    VOUCHER_ID bigint not null,
    ORDER_ID bigint not null,
    report_date date,
    foreign key(USER_ID) references users(USER_ID),
    foreign key(CATEGORY_ID) references categories(CATEGORY_ID),
    foreign key(PRODUCT_ID) references PRODUCTS(PRODUCT_ID),
    foreign key(VOUCHER_ID) references VOUCHERS(VOUCHER_ID),
    foreign key(ORDER_ID) references ORDERS(ORDER_ID)
);
CREATE TABLE REPORT_QUANTITY_MONTHLY
(
    USER_ID INT NOT NULL PRIMARY KEY,
    CATEGORY_ID INT NOT NULL,
    PRODUCT_ID INT not null,
    VOUCHER_ID bigint not null,
    ORDER_ID bigint not null,
    report_date date,
    foreign key(USER_ID) references users(USER_ID),
    foreign key(CATEGORY_ID) references categories(CATEGORY_ID),
    foreign key(PRODUCT_ID) references PRODUCTS(PRODUCT_ID),
    foreign key(VOUCHER_ID) references VOUCHERS(VOUCHER_ID),
    foreign key(ORDER_ID) references ORDERS(ORDER_ID)
);
CREATE TABLE CONTACTS
(
    CONTACTS_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    sender TEXT,
    CONTENT TEXT,
    CREATED TIMESTAMP,
    CREATOR TEXT
);
CREATE TABLE MAIL_OUT_QUEUE
(
    MESSAGE_ID INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
    MESSAGE_TIME TIMESTAMP default current_timestamp(),
    sender text,
    recipient varchar(500),
    subject text not null,
    content text not null
);